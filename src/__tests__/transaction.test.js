const Transaction = require('../transaction');
const rawTx =
	'01000000014d12118b272be53c8be4386bf608fc14b96821ad08c42491cb7d0223a0a2a228040000006a4730440220262983ee3c57072ac8ed011d37fc72d743673ad68ac6303d00afb93b24bc71ce02206673579b5885c1f89d2dacc018de74792c80d48f4231bc2955efcf1290f6edeb4121025bd921b65a347076b12acd346cae05d4dab57701ce077f29d3052ed72cad9c9cffffffff040000000000000000fdd801006a2231394878696756345179427633744870515663554551797131707a5a56646f41757419776f726b666c6f7773206d6f76696e67206f6e20636861696e0a746578742f706c61696e04746578741f7477657463685f7477746578745f313538363336383630313431372e747874017c223150755161374b36324d694b43747373534c4b79316b683536575755374d74555235035345540b7477646174615f6a736f6e046e756c6c0375726c046e756c6c07636f6d6d656e74046e756c6c076d625f757365720434373231057265706c79046e756c6c047479706504706f73740974696d657374616d70046e756c6c036170700674776574636807696e766f6963652436373936613732342d656361652d346633632d386663642d386432393339313666656238017c22313550636948473232534e4c514a584d6f53556157566937575371633768436676610d424954434f494e5f454344534122314856696579647345744e4d58374a76685677477437686a79716f564e7477616f744c58494c4f364b366a5a4666696767384e354e776d72725065653732767a727246503437615661715a4a386a63494731386171772f696d2f2f496d3050774368787230356a385a6733347666626e2f6b6439686b59374b42513da4200000000000001976a91405186ff0710ed004229e644c0653b2985c648a2388aca0030000000000001976a9144edee9749febb189b7b68f4c8c83c90503def31888aca64d0000000000001976a91461a47c349c5acecccd4380fd77e0b17be441fb9988ac00000000';

test('parse transaction', () => {
	const response = Transaction.decodeTx(rawTx, 'mainnet');

	expect(response).toMatchInlineSnapshot(`
		Object {
		  "hash": "f4ee83b37b78e59b3a273b4bc7a8750e32d97d9f8c29e9a752a7feb1db3e74df",
		  "inputs": Array [
		    Object {
		      "outputIndex": 4,
		      "prevTxId": "28a2a2a023027dcb9124c408ad2168b914fc08f66b38e48b3ce52b278b11124d",
		      "script": "4730440220262983ee3c57072ac8ed011d37fc72d743673ad68ac6303d00afb93b24bc71ce02206673579b5885c1f89d2dacc018de74792c80d48f4231bc2955efcf1290f6edeb4121025bd921b65a347076b12acd346cae05d4dab57701ce077f29d3052ed72cad9c9c",
		      "scriptString": "71 0x30440220262983ee3c57072ac8ed011d37fc72d743673ad68ac6303d00afb93b24bc71ce02206673579b5885c1f89d2dacc018de74792c80d48f4231bc2955efcf1290f6edeb41 33 0x025bd921b65a347076b12acd346cae05d4dab57701ce077f29d3052ed72cad9c9c",
		      "sequenceNumber": 4294967295,
		    },
		  ],
		  "nLockTime": 0,
		  "outputs": Array [
		    Object {
		      "satoshis": 0,
		      "script": "006a2231394878696756345179427633744870515663554551797131707a5a56646f41757419776f726b666c6f7773206d6f76696e67206f6e20636861696e0a746578742f706c61696e04746578741f7477657463685f7477746578745f313538363336383630313431372e747874017c223150755161374b36324d694b43747373534c4b79316b683536575755374d74555235035345540b7477646174615f6a736f6e046e756c6c0375726c046e756c6c07636f6d6d656e74046e756c6c076d625f757365720434373231057265706c79046e756c6c047479706504706f73740974696d657374616d70046e756c6c036170700674776574636807696e766f6963652436373936613732342d656361652d346633632d386663642d386432393339313666656238017c22313550636948473232534e4c514a584d6f53556157566937575371633768436676610d424954434f494e5f454344534122314856696579647345744e4d58374a76685677477437686a79716f564e7477616f744c58494c4f364b366a5a4666696767384e354e776d72725065653732767a727246503437615661715a4a386a63494731386171772f696d2f2f496d3050774368787230356a385a6733347666626e2f6b6439686b59374b42513d",
		    },
		    Object {
		      "satoshis": 8356,
		      "script": "76a91405186ff0710ed004229e644c0653b2985c648a2388ac",
		    },
		    Object {
		      "satoshis": 928,
		      "script": "76a9144edee9749febb189b7b68f4c8c83c90503def31888ac",
		    },
		    Object {
		      "satoshis": 19878,
		      "script": "76a91461a47c349c5acecccd4380fd77e0b17be441fb9988ac",
		    },
		  ],
		  "version": 1,
		  "vout": Array [
		    Object {
		      "n": 0,
		      "scriptPubKey": Object {
		        "addresses": Array [
		          "false",
		        ],
		        "asm": "0 OP_RETURN 31394878696756345179427633744870515663554551797131707a5a56646f417574 776f726b666c6f7773206d6f76696e67206f6e20636861696e 746578742f706c61696e 74657874 7477657463685f7477746578745f313538363336383630313431372e747874 7c 3150755161374b36324d694b43747373534c4b79316b683536575755374d74555235 534554 7477646174615f6a736f6e 6e756c6c 75726c 6e756c6c 636f6d6d656e74 6e756c6c 6d625f75736572 34373231 7265706c79 6e756c6c 74797065 706f7374 74696d657374616d70 6e756c6c 617070 747765746368 696e766f696365 36373936613732342d656361652d346633632d386663642d386432393339313666656238 7c 313550636948473232534e4c514a584d6f5355615756693757537163376843667661 424954434f494e5f4543445341 314856696579647345744e4d58374a76685677477437686a79716f564e7477616f74 494c4f364b366a5a4666696767384e354e776d72725065653732767a727246503437615661715a4a386a63494731386171772f696d2f2f496d3050774368787230356a385a6733347666626e2f6b6439686b59374b42513d",
		        "opReturn": Object {
		          "bufferParts": Array [
		            Object {
		              "data": Array [
		                49,
		                57,
		                72,
		                120,
		                105,
		                103,
		                86,
		                52,
		                81,
		                121,
		                66,
		                118,
		                51,
		                116,
		                72,
		                112,
		                81,
		                86,
		                99,
		                85,
		                69,
		                81,
		                121,
		                113,
		                49,
		                112,
		                122,
		                90,
		                86,
		                100,
		                111,
		                65,
		                117,
		                116,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                119,
		                111,
		                114,
		                107,
		                102,
		                108,
		                111,
		                119,
		                115,
		                32,
		                109,
		                111,
		                118,
		                105,
		                110,
		                103,
		                32,
		                111,
		                110,
		                32,
		                99,
		                104,
		                97,
		                105,
		                110,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                101,
		                120,
		                116,
		                47,
		                112,
		                108,
		                97,
		                105,
		                110,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                101,
		                120,
		                116,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                119,
		                101,
		                116,
		                99,
		                104,
		                95,
		                116,
		                119,
		                116,
		                101,
		                120,
		                116,
		                95,
		                49,
		                53,
		                56,
		                54,
		                51,
		                54,
		                56,
		                54,
		                48,
		                49,
		                52,
		                49,
		                55,
		                46,
		                116,
		                120,
		                116,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                124,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                49,
		                80,
		                117,
		                81,
		                97,
		                55,
		                75,
		                54,
		                50,
		                77,
		                105,
		                75,
		                67,
		                116,
		                115,
		                115,
		                83,
		                76,
		                75,
		                121,
		                49,
		                107,
		                104,
		                53,
		                54,
		                87,
		                87,
		                85,
		                55,
		                77,
		                116,
		                85,
		                82,
		                53,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                83,
		                69,
		                84,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                119,
		                100,
		                97,
		                116,
		                97,
		                95,
		                106,
		                115,
		                111,
		                110,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                110,
		                117,
		                108,
		                108,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                117,
		                114,
		                108,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                110,
		                117,
		                108,
		                108,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                99,
		                111,
		                109,
		                109,
		                101,
		                110,
		                116,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                110,
		                117,
		                108,
		                108,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                109,
		                98,
		                95,
		                117,
		                115,
		                101,
		                114,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                52,
		                55,
		                50,
		                49,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                114,
		                101,
		                112,
		                108,
		                121,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                110,
		                117,
		                108,
		                108,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                121,
		                112,
		                101,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                112,
		                111,
		                115,
		                116,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                105,
		                109,
		                101,
		                115,
		                116,
		                97,
		                109,
		                112,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                110,
		                117,
		                108,
		                108,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                97,
		                112,
		                112,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                116,
		                119,
		                101,
		                116,
		                99,
		                104,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                105,
		                110,
		                118,
		                111,
		                105,
		                99,
		                101,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                54,
		                55,
		                57,
		                54,
		                97,
		                55,
		                50,
		                52,
		                45,
		                101,
		                99,
		                97,
		                101,
		                45,
		                52,
		                102,
		                51,
		                99,
		                45,
		                56,
		                102,
		                99,
		                100,
		                45,
		                56,
		                100,
		                50,
		                57,
		                51,
		                57,
		                49,
		                54,
		                102,
		                101,
		                98,
		                56,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                124,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                49,
		                53,
		                80,
		                99,
		                105,
		                72,
		                71,
		                50,
		                50,
		                83,
		                78,
		                76,
		                81,
		                74,
		                88,
		                77,
		                111,
		                83,
		                85,
		                97,
		                87,
		                86,
		                105,
		                55,
		                87,
		                83,
		                113,
		                99,
		                55,
		                104,
		                67,
		                102,
		                118,
		                97,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                66,
		                73,
		                84,
		                67,
		                79,
		                73,
		                78,
		                95,
		                69,
		                67,
		                68,
		                83,
		                65,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                49,
		                72,
		                86,
		                105,
		                101,
		                121,
		                100,
		                115,
		                69,
		                116,
		                78,
		                77,
		                88,
		                55,
		                74,
		                118,
		                104,
		                86,
		                119,
		                71,
		                116,
		                55,
		                104,
		                106,
		                121,
		                113,
		                111,
		                86,
		                78,
		                116,
		                119,
		                97,
		                111,
		                116,
		              ],
		              "type": "Buffer",
		            },
		            Object {
		              "data": Array [
		                73,
		                76,
		                79,
		                54,
		                75,
		                54,
		                106,
		                90,
		                70,
		                102,
		                105,
		                103,
		                103,
		                56,
		                78,
		                53,
		                78,
		                119,
		                109,
		                114,
		                114,
		                80,
		                101,
		                101,
		                55,
		                50,
		                118,
		                122,
		                114,
		                114,
		                70,
		                80,
		                52,
		                55,
		                97,
		                86,
		                97,
		                113,
		                90,
		                74,
		                56,
		                106,
		                99,
		                73,
		                71,
		                49,
		                56,
		                97,
		                113,
		                119,
		                47,
		                105,
		                109,
		                47,
		                47,
		                73,
		                109,
		                48,
		                80,
		                119,
		                67,
		                104,
		                120,
		                114,
		                48,
		                53,
		                106,
		                56,
		                90,
		                103,
		                51,
		                52,
		                118,
		                102,
		                98,
		                110,
		                47,
		                107,
		                100,
		                57,
		                104,
		                107,
		                89,
		                55,
		                75,
		                66,
		                81,
		                61,
		              ],
		              "type": "Buffer",
		            },
		          ],
		          "parts": Array [
		            "19HxigV4QyBv3tHpQVcUEQyq1pzZVdoAut",
		            "workflows moving on chain",
		            "text/plain",
		            "text",
		            "twetch_twtext_1586368601417.txt",
		            "|",
		            "1PuQa7K62MiKCtssSLKy1kh56WWU7MtUR5",
		            "SET",
		            "twdata_json",
		            "null",
		            "url",
		            "null",
		            "comment",
		            "null",
		            "mb_user",
		            "4721",
		            "reply",
		            "null",
		            "type",
		            "post",
		            "timestamp",
		            "null",
		            "app",
		            "twetch",
		            "invoice",
		            "6796a724-ecae-4f3c-8fcd-8d293916feb8",
		            "|",
		            "15PciHG22SNLQJXMoSUaWVi7WSqc7hCfva",
		            "BITCOIN_ECDSA",
		            "1HVieydsEtNMX7JvhVwGt7hjyqoVNtwaot",
		            "ILO6K6jZFfigg8N5NwmrrPee72vzrrFP47aVaqZJ8jcIG18aqw/im//Im0PwChxr05j8Zg34vfbn/kd9hkY7KBQ=",
		          ],
		        },
		        "script": "006a2231394878696756345179427633744870515663554551797131707a5a56646f41757419776f726b666c6f7773206d6f76696e67206f6e20636861696e0a746578742f706c61696e04746578741f7477657463685f7477746578745f313538363336383630313431372e747874017c223150755161374b36324d694b43747373534c4b79316b683536575755374d74555235035345540b7477646174615f6a736f6e046e756c6c0375726c046e756c6c07636f6d6d656e74046e756c6c076d625f757365720434373231057265706c79046e756c6c047479706504706f73740974696d657374616d70046e756c6c036170700674776574636807696e766f6963652436373936613732342d656361652d346633632d386663642d386432393339313666656238017c22313550636948473232534e4c514a584d6f53556157566937575371633768436676610d424954434f494e5f454344534122314856696579647345744e4d58374a76685677477437686a79716f564e7477616f744c58494c4f364b366a5a4666696767384e354e776d72725065653732767a727246503437615661715a4a386a63494731386171772f696d2f2f496d3050774368787230356a385a6733347666626e2f6b6439686b59374b42513d",
		        "type": undefined,
		      },
		      "value": 0,
		    },
		    Object {
		      "n": 1,
		      "scriptPubKey": Object {
		        "addresses": Array [
		          "1Twetcht1cTUxpdDoX5HQRpoXeuupAdyf",
		        ],
		        "asm": "OP_DUP OP_HASH160 05186ff0710ed004229e644c0653b2985c648a23 OP_EQUALVERIFY OP_CHECKSIG",
		        "opReturn": null,
		        "script": "76a91405186ff0710ed004229e644c0653b2985c648a2388ac",
		        "type": "pubkeyhash",
		      },
		      "value": 8356,
		    },
		    Object {
		      "n": 2,
		      "scriptPubKey": Object {
		        "addresses": Array [
		          "18C2kA2S8cEQsepsHEqN8bbHiEkpn4UWaJ",
		        ],
		        "asm": "OP_DUP OP_HASH160 4edee9749febb189b7b68f4c8c83c90503def318 OP_EQUALVERIFY OP_CHECKSIG",
		        "opReturn": null,
		        "script": "76a9144edee9749febb189b7b68f4c8c83c90503def31888ac",
		        "type": "pubkeyhash",
		      },
		      "value": 928,
		    },
		    Object {
		      "n": 3,
		      "scriptPubKey": Object {
		        "addresses": Array [
		          "19uHbEoqMfnm5FpXfA76gGDkKkTj4BW9vg",
		        ],
		        "asm": "OP_DUP OP_HASH160 61a47c349c5acecccd4380fd77e0b17be441fb99 OP_EQUALVERIFY OP_CHECKSIG",
		        "opReturn": null,
		        "script": "76a91461a47c349c5acecccd4380fd77e0b17be441fb9988ac",
		        "type": "pubkeyhash",
		      },
		      "value": 19878,
		    },
		  ],
		}
	`);
});
